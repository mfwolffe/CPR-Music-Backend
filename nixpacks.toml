# Force Railway to use our start command - disable auto-detection
providers = []

[variables]
DJANGO_SETTINGS_MODULE = "config.settings.railway"

[phases.setup]
nixPkgs = ["python311", "gcc"]

[phases.install]
cmds = ["pip install -r requirements/railway.txt"]

[phases.start]
cmd = "echo DEBUG_START && pwd && ls -la && ls teleband/media/ && mkdir -p /app/mediafiles && cp -rv teleband/media/* /app/mediafiles/ && ls -la /app/mediafiles/ && python manage.py migrate --noinput && python manage.py collectstatic --noinput && gunicorn config.wsgi:application --bind 0.0.0.0:$PORT"
